-- 1. User table (login/roles)
CREATE TABLE `user` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `email` VARCHAR(180) NOT NULL UNIQUE,
  `roles` JSON NOT NULL,
  `password` VARCHAR(255) NOT NULL
);

-- 2. Product table (boeken)
CREATE TABLE `product` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `price` FLOAT NOT NULL,
  `image_url` VARCHAR(255) NOT NULL
);

-- 3. Purchase table (bestellingen)
CREATE TABLE `purchase` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `order_date` DATETIME NOT NULL,
  `user_id` INT NOT NULL,
  FOREIGN KEY (`user_id`) REFERENCES `user`(`id`) ON DELETE CASCADE
);

-- 4. Purchase_Product koppeltabel (ManyToMany)
CREATE TABLE `purchase_product` (
  `purchase_id` INT NOT NULL,
  `product_id` INT NOT NULL,
  PRIMARY KEY (`purchase_id`, `product_id`),
  FOREIGN KEY (`purchase_id`) REFERENCES `purchase`(`id`) ON DELETE CASCADE,
  FOREIGN KEY (`product_id`) REFERENCES `product`(`id`) ON DELETE CASCADE
);

-- 5. Student table
CREATE TABLE `student` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `first_name` VARCHAR(255) NOT NULL,
  `last_name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `age` INT NOT NULL,
  `school_group_id` INT,
  FOREIGN KEY (`school_group_id`) REFERENCES `school_group`(`id`)
);

-- 6. School Group table
CREATE TABLE `school_group` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `year` INT NOT NULL,
  `teacher` VARCHAR(255) NOT NULL
);

-- 7. Vacation table
CREATE TABLE `vacation` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL
);